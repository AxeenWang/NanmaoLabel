<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ============================================================ -->
    <!-- 按鈕樣式資源字典 (003-button-style)                           -->
    <!-- Source: .dao/raw_delta_button.md §4, §7                      -->
    <!-- ============================================================ -->

    <!-- ============================================================ -->
    <!-- T004: Action 按鈕顏色 Token (raw_delta_button.md §4.2)       -->
    <!-- ============================================================ -->
    <SolidColorBrush x:Key="ButtonDefaultBackground" Color="#1E3A5F"/>
    <SolidColorBrush x:Key="ButtonDefaultForeground" Color="#FFFFFF"/>
    <!-- Hover 顏色加亮 (原 #2E4A6F 差異太小, 改為更明顯的亮度變化) -->
    <SolidColorBrush x:Key="ButtonHoverBackground" Color="#3D5A80"/>
    <SolidColorBrush x:Key="ButtonActiveBackground" Color="#0E2A4F"/>
    <SolidColorBrush x:Key="ButtonFocusBorder" Color="#FFFFFF"/>

    <!-- ============================================================ -->
    <!-- T005: Disabled 按鈕顏色 Token (raw_delta_button.md §4.2)     -->
    <!-- ============================================================ -->
    <SolidColorBrush x:Key="ButtonDisabledBackground" Color="#E0E0E0"/>
    <SolidColorBrush x:Key="ButtonDisabledForeground" Color="#A0A0A0"/>

    <!-- ============================================================ -->
    <!-- T006: Secondary 按鈕顏色 Token (raw_delta_button.md §7.1)    -->
    <!-- ============================================================ -->
    <SolidColorBrush x:Key="SecondaryDefaultBackground" Color="#FFFFFF"/>
    <SolidColorBrush x:Key="SecondaryDefaultForeground" Color="#333333"/>
    <SolidColorBrush x:Key="SecondaryHoverBackground" Color="#F0F0F0"/>
    <SolidColorBrush x:Key="SecondaryActiveBackground" Color="#E0E0E0"/>
    <SolidColorBrush x:Key="SecondaryBorder" Color="#E0E0E0"/>
    <SolidColorBrush x:Key="SecondaryHoverBorder" Color="#D0D0D0"/>
    <SolidColorBrush x:Key="SecondaryActiveBorder" Color="#C0C0C0"/>
    <SolidColorBrush x:Key="SecondaryDisabledBackground" Color="#F5F5F5"/>
    <SolidColorBrush x:Key="SecondaryDisabledForeground" Color="#C0C0C0"/>

    <!-- ============================================================ -->
    <!-- T007: Feedback 顏色 Token (raw_delta_button.md §4.2)         -->
    <!-- ============================================================ -->
    <SolidColorBrush x:Key="FeedbackSuccess" Color="#107C10"/>
    <SolidColorBrush x:Key="FeedbackError" Color="#D13438"/>

    <!-- ============================================================ -->
    <!-- T008: ActionButtonStyle 基礎樣式                              -->
    <!-- 深藍底白字, CornerRadius=4                                    -->
    <!-- T018-T022: 狀態觸發器（Hover, Active, Focus, Disabled）       -->
    <!-- Trigger 順序按狀態優先序反向定義（最高優先序在最後）          -->
    <!-- 優先序：Disabled > Active > Focus+Hover > Focus > Hover > Default -->
    <!-- ============================================================ -->
    <Style x:Key="ActionButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource ButtonDefaultBackground}"/>
        <Setter Property="Foreground" Value="{StaticResource ButtonDefaultForeground}"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="2"/>
        <Setter Property="Padding" Value="16,8"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
        <Setter Property="RenderTransform">
            <Setter.Value>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="4"
                            Padding="{TemplateBinding Padding}">
                        <Border.Effect>
                            <DropShadowEffect x:Name="shadow"
                                              ShadowDepth="1"
                                              BlurRadius="2"
                                              Opacity="0.2"
                                              Color="Black"/>
                        </Border.Effect>
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <!-- T018: IsMouseOver Trigger (Hover) - 強化視覺回饋 -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource ButtonHoverBackground}"/>
                            <Setter TargetName="border" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect ShadowDepth="2" BlurRadius="6" Opacity="0.35" Color="Black"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="RenderTransform">
                                <Setter.Value>
                                    <ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <!-- T020: IsFocused Trigger (白色邊框 2px) -->
                        <Trigger Property="IsFocused" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource ButtonFocusBorder}"/>
                        </Trigger>
                        <!-- T019: IsPressed Trigger (Active) -->
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource ButtonActiveBackground}"/>
                            <Setter TargetName="border" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect ShadowDepth="0" BlurRadius="1" Opacity="0.15" Color="Black"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="RenderTransform">
                                <Setter.Value>
                                    <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <!-- T021: IsEnabled=False Trigger (Disabled) -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource ButtonDisabledBackground}"/>
                            <Setter Property="Foreground" Value="{StaticResource ButtonDisabledForeground}"/>
                            <Setter Property="Cursor" Value="Arrow"/>
                            <Setter TargetName="border" Property="Effect" Value="{x:Null}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ============================================================ -->
    <!-- T009: SecondaryButtonStyle 樣式                               -->
    <!-- 白底黑字帶邊框, MinWidth=40, MinHeight=40                     -->
    <!-- 用於分頁導航按鈕（◀ ▶）                                      -->
    <!-- T023-T024: 狀態觸發器（Hover, Active, Disabled）              -->
    <!-- ============================================================ -->
    <Style x:Key="SecondaryButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource SecondaryDefaultBackground}"/>
        <Setter Property="Foreground" Value="{StaticResource SecondaryDefaultForeground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource SecondaryBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="MinWidth" Value="40"/>
        <Setter Property="MinHeight" Value="40"/>
        <Setter Property="Padding" Value="8"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
        <Setter Property="RenderTransform">
            <Setter.Value>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="4"
                            Padding="{TemplateBinding Padding}">
                        <Border.Effect>
                            <DropShadowEffect x:Name="shadow"
                                              ShadowDepth="1"
                                              BlurRadius="2"
                                              Opacity="0.1"
                                              Color="Black"/>
                        </Border.Effect>
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <!-- T023: IsMouseOver Trigger (Hover) - 強化視覺回饋 -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource SecondaryHoverBackground}"/>
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource SecondaryHoverBorder}"/>
                            <Setter TargetName="border" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect ShadowDepth="2" BlurRadius="4" Opacity="0.2" Color="Black"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="RenderTransform">
                                <Setter.Value>
                                    <ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <!-- T040: IsFocused Trigger (深色邊框 2px) [FR-014, US5] -->
                        <Trigger Property="IsFocused" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource SecondaryDefaultForeground}"/>
                            <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                        </Trigger>
                        <!-- IsPressed Trigger (Active) -->
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource SecondaryActiveBackground}"/>
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource SecondaryActiveBorder}"/>
                            <Setter TargetName="border" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect ShadowDepth="0" BlurRadius="1" Opacity="0.1" Color="Black"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="RenderTransform">
                                <Setter.Value>
                                    <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <!-- T024: IsEnabled=False Trigger (Disabled) -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource SecondaryDisabledBackground}"/>
                            <Setter Property="Foreground" Value="{StaticResource SecondaryDisabledForeground}"/>
                            <Setter Property="Cursor" Value="Arrow"/>
                            <Setter TargetName="border" Property="Effect" Value="{x:Null}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ============================================================ -->
    <!-- T025-T026: TabHeaderStyle 頁簽樣式                            -->
    <!-- 用於 MainWindow 分頁標籤（RadioButton）                       -->
    <!-- 選中狀態：深藍底線 + 淺藍背景                                 -->
    <!-- 未選中狀態：透明背景                                          -->
    <!-- FR-022~FR-025: 頁簽樣式規範                                   -->
    <!-- ============================================================ -->
    <Style x:Key="TabHeaderStyle" TargetType="RadioButton">
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="MinHeight" Value="50"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Border x:Name="TabBorder"
                            Background="Transparent"
                            Padding="16,8"
                            MinHeight="50"
                            BorderThickness="0,0,0,3"
                            BorderBrush="Transparent">
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <!-- T026: IsMouseOver Trigger (Hover) -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="TabBorder" Property="Background" Value="#F5F5F5"/>
                        </Trigger>
                        <!-- T041: IsFocused Trigger (鍵盤焦點指示) [FR-014, US5] -->
                        <Trigger Property="IsFocused" Value="True">
                            <Setter TargetName="TabBorder" Property="BorderBrush" Value="#0078D4"/>
                            <Setter TargetName="TabBorder" Property="BorderThickness" Value="0,0,0,3"/>
                        </Trigger>
                        <!-- IsChecked Trigger (Selected) - 最高優先序 -->
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="TabBorder" Property="BorderBrush" Value="#0078D4"/>
                            <Setter TargetName="TabBorder" Property="Background" Value="#F0F8FF"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ============================================================ -->
    <!-- T033-T034: PulseActionButtonStyle 脈動樣式                      -->
    <!-- 儲存按鈕專用，當 IsDirty=True 時啟動脈動光暈效果                 -->
    <!-- 動畫規格：光暈透明度 0.3-0.6 循環，週期 1.5 秒                  -->
    <!-- Source: raw_delta_button.md §5.3                                -->
    <!-- FR-016: 儲存按鈕脈動效果                                        -->
    <!-- ============================================================ -->
    <Style x:Key="PulseActionButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect x:Name="PulseGlow"
                                  Color="White"
                                  BlurRadius="8"
                                  ShadowDepth="0"
                                  Opacity="0"/>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <!-- T034: DataTrigger - IsDirty=True 時啟動脈動 -->
            <DataTrigger Binding="{Binding IsDirty}" Value="True">
                <Setter Property="Effect">
                    <Setter.Value>
                        <DropShadowEffect Color="White"
                                          BlurRadius="8"
                                          ShadowDepth="0"
                                          Opacity="0.3"/>
                    </Setter.Value>
                </Setter>
                <DataTrigger.EnterActions>
                    <BeginStoryboard x:Name="PulseStoryboard">
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation
                                Storyboard.TargetProperty="(UIElement.Effect).(DropShadowEffect.Opacity)"
                                From="0.3" To="0.6"
                                Duration="0:0:0.75"
                                AutoReverse="True">
                                <DoubleAnimation.EasingFunction>
                                    <SineEase EasingMode="EaseInOut"/>
                                </DoubleAnimation.EasingFunction>
                            </DoubleAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
                <DataTrigger.ExitActions>
                    <StopStoryboard BeginStoryboardName="PulseStoryboard"/>
                </DataTrigger.ExitActions>
            </DataTrigger>
        </Style.Triggers>
    </Style>

</ResourceDictionary>
